# playback device
pcm.amix {
  type dmix
  ipc_key 1
  ipc_key_add_uid true
  slave {
    pcm "hw:Loopback,0,0"
    format S32_LE
    rate 96000
    period_size 1024
    buffer_size 4096
  }
}

# capture device
pcm.asnoop {
  type dsnoop
  ipc_key 2
  ipc_key_add_uid true
  slave {
    pcm "hw:Loopback,0,1"
    format S32_LE
    rate 96000
    period_size 1024
    buffer_size 4096
  }
}

# duplex device
pcm.aduplex {
  type asym
  playback.pcm "amix"
  capture.pcm "asnoop"
}

# alsa_in -j jack2alsa -dcloop
pcm.cloop {
  type dsnoop
  ipc_key 3
  ipc_key_add_uid true
  slave {
    pcm "hw:Loopback,1,0"
    channels 2
    format S32_LE
    rate 96000
    period_size 1024
    #buffer_size 16384
    buffer_size 4096
  }
}

# alsa_out -j alsa2jack -dploop -q 1
pcm.ploop {
  type plug
  slave.pcm "hw:Loopback,1,1"
}

# default device
pcm.!default {
  type plug
  slave.pcm "aduplex"
}
